{% extends "admin/change_form.html" %}
{% load i18n admin_urls static admin_modify %}

{# This template provides a comprehensive display for viewing existing pairs #}
{# It matches the formatting and information shown in the generation results #}

{% block object-tools-items %}
    {{ block.super }}
{% endblock %}

{% block field_sets %}
    {% if original %}
    {# Display comprehensive pair information matching generation results format #}
    <div class="module aligned" style="margin-top: 20px;">
        <h2>Pair Details</h2>

        <!-- Pair Information (shared) -->
        <div style="background: #f8f8f8; padding: 15px; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 15px;">
            <p><strong>Pair ID:</strong> {{ original.pair_id }}</p>
            <p><strong>Occupation:</strong> {{ original.occupation }}</p>
            <p><strong>Archetype:</strong> {{ archetype_display|default:"Not specified" }}</p>
            <p><strong>Location:</strong> {{ original.location|default:"Not specified" }}</p>
            <p><strong>Sub-location:</strong> {{ sublocation_display|default:"Not specified" }}</p>
            <p><strong>Good Fit Occupations:</strong> {{ original.good_fit_occupations|default:"Not specified" }}</p>
            <p><strong>PDFs Saved to:</strong> {{ folder_path }}</p>
        </div>

        {% with profiles=original.profiles.all %}
            {% if profiles %}
                <!-- Resume 1 Details -->
                <div style="background: #f0f8f0; padding: 15px; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 10px;">
                    <h3>Resume 1:</h3>
                    <p><strong>Name:</strong> {{ profiles.0.full_name }}</p>
                    <p><strong>Email:</strong> {{ profiles.0.email }}</p>
                    <p><strong>Phone:</strong> {{ profiles.0.phone }}</p>
                    <p><strong>Address:</strong> {{ profiles.0.address }}</p>
                    <p><strong>Skills:</strong> {{ profiles.0.expertise }}</p>
                </div>

                {% if profiles.1 %}
                    <!-- Resume 2 Details -->
                    <div style="background: #f0f0f8; padding: 15px; border: 1px solid #ddd; border-radius: 4px;">
                        <h3>Resume 2:</h3>
                        <p><strong>Name:</strong> {{ profiles.1.full_name }}</p>
                        <p><strong>Email:</strong> {{ profiles.1.email }}</p>
                        <p><strong>Phone:</strong> {{ profiles.1.phone }}</p>
                        <p><strong>Address:</strong> {{ profiles.1.address }}</p>
                        <p><strong>Skills:</strong> {{ profiles.1.expertise }}</p>
                    </div>
                {% endif %}
            {% else %}
                <div style="background: #fff3cd; padding: 15px; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 10px;">
                    <p><em>No profile information available for this pair.</em></p>
                </div>
            {% endif %}
        {% endwith %}
    </div>
    {% endif %}
{% endblock %}

{# This block renders AFTER all inlines, so it appears under PROFILES #}
{% block after_related_objects %}
    {{ block.super }}
    {{ add_application_html|safe }}
{% endblock %}